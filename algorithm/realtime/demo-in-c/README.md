This is where our tech demo will go for testing the design processing of developing for the cRIO in C/C++ 

# Setup Documentation:

Everything stems from this [white paper](http://www.ni.com/white-paper/14623/en/).
- [Fancy C/C++ Eclipse Download](http://www.ni.com/download/labview-real-time-module-2017/6731/en/)

## Eclipse Setup:

Follow the [steps here](http://www.ni.com/tutorial/14625/en/) up to the point before you add the ...\c++\4.9.2\... path.

Add the path to Project > Properties > C/C++ Build > Settings > Cross GCC Compiler > Includes 
> C:\build\17.0\x64\sysroots\core2-64-nilrt-linux\usr\include


## Remote System Explorer Setup (if not already in Eclipse):

Add the link to Help > Install New Software > Add  
> http://download.eclipse.org/releases/indigo/

Then search "Remote" and download the stuff...

Start Eclipse Workbench, and choose Window > Open Perspective > Other > Remote System Explorer

## cRIO Connection
First, ensure that NI MAX is downloaded. It should come with the cRIO driver found here:
> http://www.ni.com/download/compactrio-device-drivers-may-2018/7321/en/
# Inital Setup for cRIO
Connect to the cRIO via ethernet or USB and then a popup should open notifying that the cRIO has been connected.
Choose the first option to open NI MAX. Now, expand remote systems and select the cRIO. 
Check startup settings and ensure that SSHD is enabled. If it is not enable, the admin login will be needed to enable it. Contact a team member for the password.
# Initial Setup for Eclipse
Open eclipse then navigate to the remote system explorer:
> Window > Open Perspective > Other > Remote System Explorer
Now, select create new connection and choose SSH only.
Enter the IP for the host name and give a brief description if you feel included. The IP should be:
> 172.22.11.2
If this does not work. The IP can be found in NI MAX
Now, create a folder on the cRIO (preferably under main) to SFTP the files into.
TODO: Finish description

## FPGA API
#### Note:
> Remember to include libdl
(add "dl" to libraries)
API Download
> http://www.ni.com/download/fpga-interface-c-api-17.0/6801/en/
API Documentation 
> http://zone.ni.com/reference/en-XX/help/372928G-01/capi/functions_write/
Useful Walkthrough
> http://www.ni.com/white-paper/53283/en/
### Design/Deploy Process
#### Setup:
Begin with a C project in Eclipse (or your IDE of choice).
Run a test deploy without any FPGA interface code to ensure that real time is setup properly.
Create a folder for the headers from the FPGA C API to be placed. I used a folder called FPGA in the eclipse project.
> If you select a folder that is not in your workspace, you will need to add the files to your eclipse workspace build path manually and will need to use absolute file paths instead of relative file paths.
#### FPGA Code:
Load or create a LabView FPGA project for the cRIO.
Create or select a LabView file with the FPGA as the target.
Compile the program.
Right click the generated bitfile and select "Launch NI FPGA C API Generator".
> The bitfile will be located under "Build Specifications".
For output directory, choose the folder made during setup (I use FPGA) then click generate.
#### Integration:
Include the header generated by the C API (This will also pull in the NiFpga.h).
Now, the FPGA may be interfaced with using the API. An example which reads the cRIO's integrated temperature sensor is included at the end.
The datatypes that may be transferred using the API are limitted so refer to the NiFpga.h header file and check what read and write methods are declared. The online documentation from NI is out of date.
To load the NiFpga library, use ```NiFpga_Initialize()```. This must be done before any interfacing with the FPGA.
To open a session,  use ```NiFpga_Open(bit_file_path, bit_file_signature, cRIO_address, options, session)```
The bitfile path must be the absolute file path of the bitfile on the cRIO, see Deployment for more details.
#### Deployment:
Begin with a project folder like the one created in the Real Time section.
Add an FPGA folder (this is a stylistic choice).
Add a copy of the generated bitfile to the FPGA folder (or whatever other folder on the cRIO).
> This can be done through the remote system explore on eclipse. Just paste the bitfile into the folder.
Now, launch a run configuration to deploy the executable to the cRIO. An example will be included.
